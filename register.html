<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NIRVAAN - Register & Login</title>
<style>
  body {
    font-family: Poppins, sans-serif;
    background: linear-gradient(to bottom, #dfe8ff, #a3c2ff);
    padding: 20px;
    color: #333;
  }

  .welcome-box {
    text-align: center;
    margin-bottom: 30px;
  }

  .welcome-box h1 {
    font-size: 36px;
    color: #5a62ff;
    margin-bottom: 5px;
  }

  .welcome-box p {
    font-size: 16px;
    color: #333;
    font-style: italic;
  }

  .box {
    width: 350px;
    background: white;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0px 0px 15px #0002;
    margin: auto;
  }

  .box h2 {
    text-align: center;
    margin-bottom: 20px;
    color: #5a62ff;
  }

  input, select, textarea {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    border-radius: 10px;
    border: 1px solid #aaa;
    outline: none;
  }

  textarea { height: 60px; }

  .btn {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    background: #5a62ff;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
  }

  .btn:hover { background: #4b52e0; }

  #strength {
    font-size: 14px;
    margin-bottom: 5px;
  }

  #preview {
    display: none;
    width: 120px;
    margin-top: 10px;
    border-radius: 10px;
    border: 2px solid #5a62ff;
  }

  .link { text-align: center; margin-top: 12px; }
  .link a { color: #5a62ff; font-weight: bold; }
</style>
</head>
<body>

<div class="welcome-box">
  <h1>Welcome to NIRVAAN</h1>
  <p>One small step toward your mental health üíõ</p>
</div>

<div class="box">
  <h2>Create Account</h2>
  <input type="text" id="fname" placeholder="First Name">
  <input type="text" id="lname" placeholder="Last Name">

  <label>Date of Birth</label>
  <input type="date" id="dob">

  <textarea id="paddress" placeholder="Permanent Address"></textarea>
  <textarea id="caddress" placeholder="Correspondence Address"></textarea>

  <label>Upload ID Proof</label>
  <input type="file" id="idProof" accept="image/*">
  <img id="preview">

  <input type="text" id="phone" placeholder="Phone Number">
  <input type="email" id="email" placeholder="Email">

  <input type="text" id="mother" placeholder="Mother's Name">
  <input type="text" id="father" placeholder="Father's Name">

  <select id="gender">
    <option value="">Gender</option>
    <option>Female</option>
    <option>Male</option>
    <option>Other</option>
  </select>

  <input type="password" id="password" placeholder="Create Password">
  <div id="strength"></div>

  <input type="password" id="cpassword" placeholder="Confirm Password">

  <label><input type="checkbox" onclick="togglePass()"> Show Password</label>

  <button id="otpBtn" class="btn">Send OTP</button>
  <div id="otpBox" style="display:none;">
    <input type="text" id="otpInput" placeholder="Enter OTP">
    <button class="btn" id="verifyOtpBtn">Verify OTP</button>
  </div>

  <p class="link">Already Registered? <a href="login.html">Login</a></p>
</div>

<script>
// ID Proof Preview
document.getElementById('idProof').addEventListener('change', function(e){
  const file = e.target.files[0];
  const preview = document.getElementById('preview');
  if(file){
    const reader = new FileReader();
    reader.onload = () => { preview.src = reader.result; preview.style.display='block'; };
    reader.readAsDataURL(file);
  }
});

// Password Strength
const passwordField = document.getElementById('password');
const strengthText = document.getElementById('strength');
passwordField.addEventListener('input',()=>{
  const val = passwordField.value;
  let strength = '';
  if(val.length<4) strength='Weak ‚ùå';
  else if(val.length<7) strength='Medium ‚ö†Ô∏è';
  else strength='Strong ‚úÖ';
  strengthText.innerText='Password Strength: '+strength;
});

// Show/Hide Password
function togglePass(){
  const pass = document.getElementById('password');
  const cpass = document.getElementById('cpassword');
  if(pass.type==='password'){ pass.type='text'; cpass.type='text'; }
  else{ pass.type='password'; cpass.type='password'; }
}

// OTP + Registration
let generatedOTP='';
document.getElementById('otpBtn').onclick=()=>{
  const pass = passwordField.value;
  const cpass = document.getElementById('cpassword').value;
  if(pass!==cpass){ alert('Passwords do not match ‚ùå'); return; }
  generatedOTP=Math.floor(100000 + Math.random()*900000).toString();
  document.getElementById('otpBox').style.display='block';
  alert('OTP Sent: '+generatedOTP);
};

document.getElementById('verifyOtpBtn').onclick=()=>{
  const otpInput = document.getElementById('otpInput').value;
  if(otpInput!==generatedOTP){ alert('Incorrect OTP ‚ùå'); return; }
  saveUser();
  alert('OTP Verified! Account Created üéâ');
  window.location.href='login.html';
};

function saveUser(){
  const user={
    fname: document.getElementById('fname').value,
    lname: document.getElementById('lname').value,
    dob: document.getElementById('dob').value,
    paddress: document.getElementById('paddress').value,
    caddress: document.getElementById('caddress').value,
    phone: document.getElementById('phone').value,
    email: document.getElementById('email').value,
    mother: document.getElementById('mother').value,
    father: document.getElementById('father').value,
    gender: document.getElementById('gender').value,
    password: document.getElementById('password').value
  };
  localStorage.setItem('nirvaanUser', JSON.stringify(user));
}
</script>

</body>
</html>
